<!DOCTYPE html>
<html>
<head>
	<title>Autotune</title>
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
 <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
  
 
</head>
<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
  <a class="navbar-brand" href="#">AutoTune</a>
  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/cars/">Cars</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/staff/">Staff</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
      </li>
    </ul>
  </div>
</nav>
 <div id="header"><h1 id="headertext">Your lucky ticket to the world of luxury tuning</h1>
<div id="modal" class="container">
  
  <!-- Trigger the modal with a button -->
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">New Tune</button>

  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal">&times;</button>
          
        </div>
        <div class="modal-body text-dark bg-light">
          
          <div id="form">
            {% csrf_token %}
         
            <label>Type of change: </label>
            <select id="changeSelect" style="margin-left: 150px; border-radius: 5px;width: 205px;">
              {% for change in changes %}
              <option>{{change}}</option>
              {% endfor %}
            </select><br>
            <label>detail</label>
            <select id="detailSelect" style="margin-left: 250px;border-radius: 5px;">
              {% for detail in details %}
              <option>{{detail}}</option>
              {% endfor %}
            </select><br>
            <label>Car: </label>
            <select id="carSelect" style="margin-left: 262px;width: 205px;border-radius: 5px;">
              {% for car in cars %}
                <option>{{car.car_id}} {{car.mark}}</option>
              {% endfor %}
            </select><br>
            <label>Power change: </label>
            <select id="powerSelect" style="margin-left: 160px;width: 150px;">
              <option>10</option>
              <option>20</option>
              <option>30</option>
              <option>40</option>
              <option>50</option>
            </select>
            <input type="radio" value="+" name="1"><label>+</label>
            <input type="radio" value="-"  name="1"><label>-</label>
             <br> 
            <label>Speed change: </label>
            <select id="speedSelect" style="margin-left: 160px;width: 150px">
              <option>10</option>
              <option>20</option>
              <option>30</option>
              <option>40</option>
              <option>50</option>
            </select>
             <input type="radio" value="+"  name="2"><label>+</label>
            <input  type="radio" value="-"  name="2"><label>-</label><br>
            <button id="submit" class="btn btn-primary">OK</button>
          </div>
          <div style="margin-left: 300px;">Original Speed: <span id="orspeed"></span> Speed Change: <span id="speed"></span></div>
          <div style="margin-left: 300px;">Original Power: <span id="orpower"></span> Power Change: <span id="power"></span></div>
          <div style="margin-left: 300px;">Total Price: <span id="total"></span></div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>
</div>

 </div>




 
 <div id="cont" class="container">
   <div class="row">
   
      <div id="hov1" class="col-sm alert alert-danger hov">
        <h5 id="mark1" style="text-align: center;">{{rows.0.mark}}</h5><br>
        <div id="type1" class="alert alert-info"><b style="text-align: center;">Type of change: {{rows.0.type_of_change}}</b></div><br>
        <div id="date1" class="alert alert-info"><b>Change Date: {{rows.0.change_date}}</b></div>
       
         <a id="href1" href="{% url 'info' rows.0.id %}" class="btn btn-primary"><span style="color:white;">More info</span></a>
      </div> 
      <div id="hov2" class="col-sm alert alert-danger hov">
        <h5 id="mark2" style="text-align: center;">{{rows.1.mark}}</h5><br>
        <div id="type2" class="alert alert-info type"><b style="text-align: center;">Type of change: {{rows.1.type_of_change}}</b></div><br>
        <div id="date2" class="alert alert-info"><b>Change Date: {{rows.1.change_date}}</b></div>
        
         <a id="href2" href="{% url 'info' rows.1.id %}" class="btn btn-primary"><span style="color:white;">More info</span></a>
      </div>  
      <div id="hov3" class="col-sm alert alert-danger hov">
        <h5 id="mark3"  style="text-align: center;">{{rows.2.mark}}</h5><br>
        <div id="type3" class="alert alert-info type"><b style="text-align: center;">Type of change: {{rows.2.type_of_change}}</b></div><br>
        <div id="date3" class="alert alert-info date"><b>Change Date: {{rows.2.change_date}}</b></div>
      
         <a id="href3" href="{% url 'info' rows.2.id %}" class="btn btn-primary"><span style="color:white;">More info</span></a>
      </div>
      <div id="hov4" class="col-sm alert alert-danger hov">
        <h5 id="mark4" style="text-align: center;">{{rows.3.mark}}</h5><br>
        <div id="type4" class="alert alert-info type"><b style="text-align: center;">Type of change: {{rows.3.type_of_change}}</b></div><br>
        <div id="date4" class="alert alert-info date"><b>Change Date: {{rows.3.change_date}}</b></div>

         <a  id="href4" href="{% url 'info' rows.3.id %}" class="btn btn-primary"><span style="color:white;">More info</span></a>
      </div>
      
   </div>
 </div>
<button class="btn btn-light" id="left"><<<</button>
<button class="btn btn-light" id="rigth">>>></button>

<footer style="margin-top: 450px;" class="page-footer font-small bg-dark">

  <div class="footer-copyright text-center py-3 text-white">Â© 2019 Copyright:
    <a href="https://sdu.edu.kz/ru/suleyman-demirel-university-ru/"> sdu.edu.kz</a>
  </div>


</footer>

  <style type="text/css">
    #form > label {
      font-family: sans-serif;
      font-size: 20px;
    }
    #left,#rigth{
      height: 40px;
      width: 60px;

    }
    #left {
      position: absolute;
      margin-top: 200px;
      margin-left: 25px;
    }
    #rigth{
      position: absolute;
      margin-left: 1255px;
      margin-top: 200px;
    }
    #modal {
      
      margin-left: 200px;
      margin-top: 450px;
    }
    .hov:hover{
      border-radius: 20px;

    }
    #cont {
      position: absolute;
      margin-top: 50px;
      margin-left: 100px;
    }
    #headertext{
      margin-left: 500px;
      padding-top: 110px;
      font-family: serif;
    }
    body{
      background-image: url('/static/body.jpg');
    }
    #header {
      width: 100%;
      height: 700px;
      background-size: cover;
      background-image: url('/static/bg1.jpg');
    }
    div > span {
      font-size: 25px;
      color:red;
    }
  </style>
  <script type="text/javascript" src="/static/jquerys.min.js"></script>
  <script type="text/javascript">
        $(document).ready(function(){


          var list = new Array();
        "{% for row in rows %}"
          var dic = {
          'id':'{{row.id}}',
          'mark':'{{row.mark}}',
          'type_of_change':'{{row.type_of_change}}',
          'change_date':'{{row.change_date}}',
          'maxspeed_change':'{{row.maxspeed_change}}',
          'power_change':'{{row.power_change}}',
          'detail_name':'{{row.detail_name}}',
          'detail_price':'{{row.detail_price}}',
          'detail_guarantee':'{{detail_guarantee}}'
        }
          list.push(dic);
        "{% endfor %}"
        var detailPrice = {};
        '{% for pr in price %}'
          detailPrice['{{pr.detail_name}}'.trim()]='{{pr.detail_price}}';
        
        '{% endfor %}'
        
         

          
          var carss = {};
          "{% for car in cars %}"
            carss['{{car.car_id}}']= {
              'id':'{{car.car_id}}',
              'mark':'{{car.mark}}',
              'max_speed':'{{car.max_speed}}',
              'power':'{{car.power}}'
            }

            "{% endfor %}"
         

         $('#submit').on('click',function(){
          
          var sign =  $("input[name='2']:checked").val();
          var calc1 = {
            "+":parseInt(carss[$('#carSelect').val().split(" ")[0]]['max_speed'])+parseInt($('#speedSelect').val()),
            '-':parseInt(carss[$('#carSelect').val().split(" ")[0]]['max_speed'])-parseInt($('#speedSelect').val())
          }
          
           $('#orspeed').html( carss[$('#carSelect').val().split(" ")[0]]['max_speed']);
            $('#speed').html(calc1[sign]); 
          
          var sign2 =  $("input[name='1']:checked").val();
            var calc2 = {
            "+":parseInt(carss[$('#carSelect').val().split(" ")[0]]['power'])+parseInt($('#powerSelect').val()),
            '-':parseInt(carss[$('#carSelect').val().split(" ")[0]]['power'])-parseInt($('#powerSelect').val())
          }
        
      
            $('#orpower').html( carss[$('#carSelect').val().split(" ")[0]]['power']);
            $('#power').html(calc2[sign2]);
            $('#total').html(detailPrice[$('#detailSelect').val()]);
         });
        var ind1 = 1;
        var ind2 = 2;
        var ind3 = 3;
        var ind4 = 4;

        $('#rigth').on('click',function(){
          
          if (ind4<list.length) {
            $('#mark1').html(list[ind1]['mark']);
            $('#type1').html('<b style="text-align: center;">Type of change: '+list[ind1]['type_of_change']+'</b>');
            $('#date1').html('<b>Change Date: '+list[ind1]['change_date']+'</b>');
            
            var url1 = $('#href1').attr('href').replace(list[ind1-1]['id'], ''+list[ind1]['id']);
        
            $('#href1').attr('href',url1);

            

            $('#mark2').html(list[ind2]['mark']);
            $('#type2').html('<b style="text-align: center;">Type of change: '+list[ind2]['type_of_change']+'</b>');
            $('#date2').html('<b>Change Date: '+list[ind2]['change_date']+'</b>');
            
            var url2 = $('#href2').attr('href').replace(list[ind2-1]['id'], ''+list[ind2]['id']);
        
            $('#href2').attr('href',url2);


            $('#mark3').html(list[ind3]['mark']);
            $('#type3').html('<b style="text-align: center;">Type of change: '+list[ind3]['type_of_change']+'</b>');
            $('#date3').html('<b>Change Date: '+list[ind3]['change_date']+'</b>');
            var url3 = $('#href3').attr('href').replace(list[ind3-1]['id'], ''+list[ind3]['id']);
        
            $('#href3').attr('href',url3);


            $('#mark4').html(list[ind4]['mark']);
            $('#type4').html('<b style="text-align: center;">Type of change: '+list[ind4]['type_of_change']+'</b>');
            $('#date4').html('<b>Change Date: '+list[ind4]['change_date']+'</b>');
            var url4 = $('#href4').attr('href').replace(list[ind4-1]['id'], ''+list[ind4]['id']);
        
            $('#href4').attr('href',url4);


            ind1++;
            ind2++;
            ind3++;
            ind4++;
          }
        });
      });
  </script>
</body>
</html>